tag:
priority: 319 # same as vif
type: txt
help: Nome de dispositivo Pseudo Ethernet
val_help: <pethN>; Nome de interface Pseudo Ethernet

syntax:expression: pattern $VAR(@) "^peth[0-9]+$" \
         ; "nome tem de ser (peth0-peth999)"

commit:expression: $VAR(link) != "" 
         ; "Dispositivo de link deve ser definido como virtual ethernet $VAR(@)"

create:	ip link add $VAR(@) link $VAR(link/@) type macvlan mode $VAR(mode/@) || exit 1
	if ! cli-shell-api exists interfaces ethernet $VAR(@) disable;
	then ip link set $VAR(@) up
	fi
	/opt/vyatta/sbin/vyatta-link-detect $VAR(@) on

delete: ip link delete dev $VAR(@) type macvlan
